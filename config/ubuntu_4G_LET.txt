1.删除apt和 /etc/environment 代理配置

2.安装docker
sudo apt-get update
sudo apt-get install docker.io


3.配置docker镜像国内源
sudo mkdir /etc/docker/
sudo touch /etc/docker/daemon.json
sudo vim /etc/docker/daemon.json

{
  "registry-mirrors": [
  	"https://docker.mirrors.ustc.edu.cn/",
  	"https://hub-mirror.c.163.com",
  	"https://registry.docker-cn.com",
    	"https://dockerhub.azk8s.cn",
    	"https://reg-mirror.qiniu.com",
    	"https://registry.docker-cn.com"
  ]
}

sudo systemctl daemon-reload
 
sudo systemctl restart docker



4.配置apt国内源
-----apt-----
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bakcup
sudo vim /etc/apt/sources.list 

deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse

deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse


sudo apt update




5.配置github仓库到码云平台
-----aws  github ip--------
1）在https://www.ipaddress.com/ 上查看github.com和 raw.githubusercontent.com的ip地址。
140.82.112.3     github.com                            
199.232.68.133   raw.githubusercontent.com
72.21.206.80     amazonaws.com
72.21.210.29     amazonaws.com
207.171.166.22   amazonaws.com


2）修改/etc/hosts文件，加入对应ip地址。Ip地址可能会变化，不要直接用下面例子里的地址。
~$ cat /etc/hosts
127.0.0.1 localhost
127.0.1.1 iotg-lab-007

# user content
140.82.112.3     github.com                            
199.232.68.133   raw.githubusercontent.com
72.21.206.80     amazonaws.com
72.21.210.29     amazonaws.com
207.171.166.22   amazonaws.com


# The following lines are desirable for IPv6 capable hosts

3）重启网络服务。
sudo service networking restart


4）测试配置是否成功
wget https://raw.githubusercontent.com/edgexfoundry/developer-scripts/master/releases/fuji/compose-files/docker-compose-fuji-no-secty.yml



6.配套onnx_runtime仓库
sudo vim ~/.gitconfig
添加:

[url "https://gitee.com/WayneFeng/onnxruntime.git"]
        insteadOf = https://github.com/microsoft/onnxruntime.git

